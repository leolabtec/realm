<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realm 转发管理面板</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Realm 转发管理面板</h1>
        <div class="controls">
            <button id="startButton">启动服务</button>
            <button id="stopButton">停止服务</button>
            <button id="restartButton">重启服务</button>
            <button id="logoutButton">登出</button>
            <span>状态: <span id="serviceStatus">检查中...</span></span>
        </div>
        <div id="output"></div>

        <h2>当前转发规则</h2>
        <div class="table-controls">
            <label>每页显示:
                <select id="pageSizeSelect">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </label>
            <span id="pageInfo"></span>
            <button id="prevPage">上一页</button>
            <button id="nextPage">下一页</button>
        </div>
        <table id="forwardingTable">
            <thead>
                <tr>
                    <th>序号</th>
                    <th>中转端口</th>
                    <th>落地机 IP</th>
                    <th>目标端口</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <h2>添加转发规则</h2>
        <div class="form-group">
            <label>中转端口:</label>
            <input type="number" id="localPort" min="1" max="65535" required>
        </div>
        <div class="form-group">
            <label>落地机 IP:</label>
            <input type="text" id="remoteIP" required>
        </div>
        <div class="form-group">
            <label>目标端口:</label>
            <input type="number" id="remotePort" min="1" max="65535" required>
        </div>
        <button id="addRuleButton">添加规则</button>

        <h2>批量添加转发规则</h2>
        <div class="form-group">
            <label>请输入转发规则（每行一个规则）：<br>
                IPv4 格式：中转端口:落地机IP:目标端口<br>
                IPv6 格式：中转端口:[落地机IPv6]:目标端口
            </label>
            <textarea id="rulesInput" rows="5"></textarea>
        </div>
        <button id="addBatchRulesButton">批量添加规则</button>
        <input type="hidden" id="csrf_token" value="{{.csrf_token}}">
    </div>
    <script src="/static/app.js"></script>
</body>
</html>
